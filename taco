-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.ingredient
(
    id character varying(4) COLLATE pg_catalog."default" NOT NULL,
    name character varying(25) COLLATE pg_catalog."default" NOT NULL,
    type character varying(10) COLLATE pg_catalog."default" NOT NULL,
    price numeric NOT NULL DEFAULT 0,
    CONSTRAINT ingredient_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.taco
(
    id integer NOT NULL DEFAULT nextval('taco_id_seq'::regclass),
    name character varying(50) COLLATE pg_catalog."default" NOT NULL,
    createdat timestamp without time zone NOT NULL,
    CONSTRAINT taco_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.taco_ingredients
(
    taco_id bigint NOT NULL,
    ingredients_id character varying(4) COLLATE pg_catalog."default" NOT NULL
);

CREATE TABLE IF NOT EXISTS public.taco_order
(
    id integer NOT NULL DEFAULT nextval('taco_order_id_seq'::regclass),
    delivery_name character varying(50) COLLATE pg_catalog."default" NOT NULL,
    delivery_street character varying(50) COLLATE pg_catalog."default" NOT NULL,
    delivery_city character varying(50) COLLATE pg_catalog."default" NOT NULL,
    delivery_state character varying(30) COLLATE pg_catalog."default" NOT NULL,
    delivery_zip character varying(10) COLLATE pg_catalog."default" NOT NULL,
    cc_number character varying(20) COLLATE pg_catalog."default" NOT NULL,
    cc_expiration character varying(5) COLLATE pg_catalog."default" NOT NULL,
    cc_cvv character varying(3) COLLATE pg_catalog."default" NOT NULL,
    placed_at timestamp without time zone NOT NULL,
    user_id integer DEFAULT 1,
    CONSTRAINT taco_order_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.taco_order_tacos
(
    order_id bigint NOT NULL,
    tacos_id bigint NOT NULL
);

CREATE TABLE IF NOT EXISTS public.user_acc
(
    id integer NOT NULL DEFAULT nextval('user_acc_id_seq'::regclass),
    username text COLLATE pg_catalog."default" NOT NULL,
    password text COLLATE pg_catalog."default" NOT NULL,
    fullname text COLLATE pg_catalog."default" NOT NULL,
    street text COLLATE pg_catalog."default" NOT NULL,
    city text COLLATE pg_catalog."default" NOT NULL,
    state text COLLATE pg_catalog."default" NOT NULL,
    zip text COLLATE pg_catalog."default" NOT NULL,
    phone_number text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT user_acc_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.taco_ingredients
    ADD CONSTRAINT taco_ingredients_ingredient_fkey FOREIGN KEY (ingredients_id)
    REFERENCES public.ingredient (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.taco_ingredients
    ADD CONSTRAINT taco_ingredients_taco_fkey FOREIGN KEY (taco_id)
    REFERENCES public.taco (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.taco_order
    ADD CONSTRAINT user_acc_user_fk FOREIGN KEY (user_id)
    REFERENCES public.user_acc (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.taco_order_tacos
    ADD CONSTRAINT taco_order_tacos_taco_fkey FOREIGN KEY (tacos_id)
    REFERENCES public.taco (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.taco_order_tacos
    ADD CONSTRAINT taco_order_tacos_tacoorder_fkey FOREIGN KEY (order_id)
    REFERENCES public.taco_order (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;